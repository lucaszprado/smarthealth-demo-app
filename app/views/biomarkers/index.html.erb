<div class="navbar navbar-expand-sm navbar-light navbar-lewagon fixed-top">
  <div class="container-fluid d-flex justify-content-start">
    <%= link_to "#", class: "navbar-brand" do %>
      <!--Uncomment when you have a logo -->
      <!--%= image_tag "logo.svg" %-->
      <!--Uncomment when you have a logo -->
      <div>
        <p class="fs-3"> <%= @human.name %> </p>
      </div>
    <% end %>
  </div>
</div>

<div class="container pt-5">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-9">
      <!-- Search bar -->
      <div data-controller='refresh-list'>
        <div class="SearchBar-container">
            <%= form_with url: search_human_biomarkers_path(@human), method: :get, html: { class: 'SearchBar-form', data: { refresh_list_target: 'form' } } do |f| %>
              <div class="SearchBar-inputWrapper">
                <%= f.text_field :query,
                                  class: "SearchBar-input",
                                  placeholder:"Digite um biomarcador",
                                  value: params[:query],
                                  data: {
                                        refresh_list_target:'search_input',
                                        action: "keyup->refresh-list#update"
                                  }
                %>
                <span class="SearchBar-icon">
                  <i class="fa fa-search SearchBar-iconElement"></i>
                </span>
              </div>
            <% end %>
        </div>

        <!-- Biomarkers list -->
        <div data-refresh-list-target='list'>
          <% @biomarkers.each do |biomarker| %>
            <!-- Result Card -->
            <% if biomarker[:unit_value_type] == 1 %>
              <%= render "shared/result_card",
                link: human_biomarker_measures_path(@human.id, biomarker[:biomarker_id]),
                icon_path: "fa-solid fa-circle-radiation", #fa-solid fa-chart-line fa-light fa-x-ray fa-regular fa-image
                title: biomarker[:synonym_name],
                key_info: "#{biomarker[:original_value]} #{biomarker[:unit_name]}",
                status: biomarker[:measure_status],
                date: biomarker[:date],
                labels: nil
              %>
            <% else %>
                <%= render "shared/result_card",
                link: human_biomarker_measures_path(@human.id, biomarker[:biomarker_id]),
                icon_path: "fa-solid fa-circle-radiation", #fa-solid fa-chart-line fa-light fa-x-ray fa-regular fa-image
                title: biomarker[:synonym_name],
                key_info: biomarker[:measure_text],
                status: nil,
                date: biomarker[:date],
                labels: nil
              %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
